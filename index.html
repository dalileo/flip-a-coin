<html>
<head>
  <title>Flip a coin</title>
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <meta name="viewport" content="initial-scale=1.0, width=device-width" />
  <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
  <link rel="manifest" href="img/favicon/site.webmanifest">
  <link rel="mask-icon" href="img/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#444444">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
  <button id="theme-toggle" aria-label="Cambiar tema">
    <span class="sun-icon">☀️</span>
    <span class="moon-icon">🌙</span>
  </button>
  
  <div class='v-center-flex'>
    <div id="moneda" tabindex="0" role="button" aria-label="Lanzar moneda">
      <div class="side-a"><img src="img/cara.png" alt="cara"></div> <!-- link a archivo de imagen para cara -->
      <div class="side-b"><img src="img/cruz.png" alt="cruz"></div> <!-- link a archivo de imagen para cruz -->
    </div>
  </div>
  <script>
  jQuery(document).ready(function($){

    function flipCoin() {
      var flipResult = Math.random();
      $('#moneda').removeClass();
      setTimeout(function(){
        if(flipResult <= 0.5){
          $('#moneda').addClass('cara');
          console.log('salió cara');
        }
        else{
          $('#moneda').addClass('cruz');
          console.log('salió cruz');
        }
      }, 100);
    }
    
    $('#moneda').on('click', flipCoin);
    
    // Eventos de teclado
    $('#moneda').on('keydown', function(e){
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        flipCoin();
      }
    });
    
    // Dar foco automático a la moneda
    setTimeout(function(){
      $('#moneda').focus();
    }, 100);
    
    // Tema claro/oscuro
    function initTheme() {
      var savedTheme = localStorage.getItem('theme');
      var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      
      if (savedTheme === 'light' || (!savedTheme && !prefersDark)) {
        $('body').addClass('light-mode');
      }
    }
    
    function toggleTheme() {
      $('body').toggleClass('light-mode');
      var isLight = $('body').hasClass('light-mode');
      localStorage.setItem('theme', isLight ? 'light' : 'dark');
    }
    
    $('#theme-toggle').on('click', toggleTheme);
    initTheme();
  });
  </script>
</body>
</html>
