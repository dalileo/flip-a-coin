<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flip a coin</title>
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
  <link rel="manifest" href="img/favicon/site.webmanifest">
  <link rel="mask-icon" href="img/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#444444">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
  <main class='v-center-flex'>
    <div id="moneda" role="button" tabindex="0" aria-label="Hacer clic para lanzar la moneda">
      <div class="side-a"><img src="img/cara.png" alt="Cara de la moneda"></div>
      <div class="side-b"><img src="img/cruz.png" alt="Cruz de la moneda"></div>
    </div>
  </main>
  <script>
  jQuery(document).ready(function($){
    const $moneda = $('#moneda');
    let isFlipping = false;
    
    function flipCoin() {
      if (isFlipping) return; // Prevenir múltiples clics durante la animación
      
      isFlipping = true;
      const flipResult = Math.random();
      
      // Remover clases anteriores
      $moneda.removeClass('cara cruz');
      
      // Pequeño delay para que se vea el reset
      setTimeout(function(){
        if(flipResult <= 0.5){
          $moneda.addClass('cara');
          console.log('Salió cara');
        } else {
          $moneda.addClass('cruz');
          console.log('Salió cruz');
        }
        
        // Permitir nuevo lanzamiento después de la animación
        setTimeout(function(){
          isFlipping = false;
        }, 3000); // Duración de la animación CSS
      }, 100);
    }
    
    // Eventos de click y teclado
    $moneda.on('click', flipCoin);
    $moneda.on('keypress', function(e){
      if (e.which === 13 || e.which === 32) { // Enter o Espacio
        e.preventDefault();
        flipCoin();
      }
    });
    
    // Mejorar accesibilidad
    $moneda.attr('aria-pressed', 'false');
    
    // Actualizar aria-pressed cuando se lance la moneda
    $moneda.on('click keypress', function(){
      $(this).attr('aria-pressed', 'true');
      setTimeout(function(){
        $moneda.attr('aria-pressed', 'false');
      }, 3000);
    });
  });
  </script>
</body>
</html>
